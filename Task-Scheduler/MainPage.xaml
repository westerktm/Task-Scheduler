<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Task_Scheduler.MainPage">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackLayout Grid.Row="0" 
                     Orientation="Vertical"
                     Padding="20">
            <Label x:Name="TasksLabel"
                   Text="Ð—Ð°Ð´Ð°Ñ‡Ð¸" 
                   FontSize="28"
                   HorizontalOptions="Center" 
                   Margin="0,10,0,10">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnTasksLabelClicked" />
                </Label.GestureRecognizers>
            </Label>

            <Label x:Name="NoTasksLabel"
                   Text="ÐŸÐ¾Ñ…Ð¾Ð¶Ðµ, Ñƒ Ð²Ð°Ñ Ð½ÐµÑ‚ Ð·Ð°Ð´Ð°Ñ‡ :(" 
                   FontSize="24" 
                   HorizontalOptions="Center" 
                   HorizontalTextAlignment="Center"
                   IsVisible="True"
                   Margin="10,10,0,10"/>

            <Button x:Name="CreateTaskButton"
                    Text="+ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ" 
                    TextColor="#333333"
                    BackgroundColor="#F5F5F5"
                    CornerRadius="10"
                    Padding="20,10"
                    MinimumWidthRequest="150"
                    HorizontalOptions="Center"
                    Pressed="OnCreateTaskButtonPressed"
                    Released="OnCreateTaskButtonReleased"
                    Clicked="OnCreateTaskButtonClicked" />

            <ImageButton x:Name="PlusImageButton"
                        Source="plus.png"
                        WidthRequest="50"
                        HeightRequest="50"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                        IsVisible="False"
                        Clicked="OnPlusImageButtonClicked" 
                        ToolTipProperties.Text="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ"
                        Margin="0,0,0,0"/>
        </StackLayout>

        <Frame Grid.Row="1"
               BackgroundColor="White"
               HasShadow="True"
               CornerRadius="0"
               Padding="20"
               WidthRequest="900"
               HeightRequest="900"
               HorizontalOptions="Center"
               VerticalOptions="Center"
               Margin="20,0">
            <ScrollView Orientation="Vertical">
                <StackLayout x:Name="TasksContainer" 
                             Spacing="15"
                             VerticalOptions="Start" />
            </ScrollView>
        </Frame>

        <!-- "Task Scheduler" Ð² Ð»ÐµÐ²Ð¾Ð¼ Ð²ÐµÑ€Ñ…Ð½ÐµÐ¼ ÑƒÐ³Ð»Ñƒ -->
        <Label Text="Task Scheduler" 
               FontSize="24" 
               HorizontalOptions="Start"
               VerticalOptions="Start"
               Margin="130,10,0,0" />

        <!-- ÐÐ²Ð°Ñ‚Ð°Ñ€ Ð² Ð¿Ñ€Ð°Ð²Ð¾Ð¼ Ð²ÐµÑ€Ñ…Ð½ÐµÐ¼ ÑƒÐ³Ð»Ñƒ -->
        <ImageButton x:Name="AvatarImageButton"
                    Source="avatar.png"
                    WidthRequest="40"
                    HeightRequest="40"
                    CornerRadius="5"
                    HorizontalOptions="End"
                    VerticalOptions="Start"
                    Margin="0,0,10,0"
                    ToolTipProperties.Text="ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ"
                    Clicked="OnAvatarClicked" />
        
        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº -->
        <ImageButton x:Name="SettingsImageButton"
                     Source="setting.png"
                     WidthRequest="40"
                     HeightRequest="40"
                     CornerRadius="5"
                     HorizontalOptions="End"
                     VerticalOptions="Start"
                     Margin="0,0,70,0"
                     ToolTipProperties.Text="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"
                     Clicked="OnSettingsClicked" />

        <ImageButton x:Name="NotificationsImageButton"
                     Source="notifications.png"
                     WidthRequest="40"
                     HeightRequest="40"
                     CornerRadius="5"
                     HorizontalOptions="End"
                     VerticalOptions="Start"
                     Margin="0,0,130,0"
                     ToolTipProperties.Text="Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ"
                     Clicked="OnNotificationsClicked" />
        
        <ImageButton x:Name="FavoritesImageButton"
                     Source="favorites.png"
                     WidthRequest="40"
                     HeightRequest="40"
                     CornerRadius="5"
                     HorizontalOptions="End"
                     VerticalOptions="Start"
                     Margin="0,0,190,0"
                     ToolTipProperties.Text="Ð˜Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ðµ"
                     Clicked="OnFavoritesClicked" />

        <ImageButton x:Name="LogoImageButton"
                     Source="logo.png"
                     WidthRequest="40"
                     HeightRequest="40"
                     CornerRadius="5"
                     HorizontalOptions="Start"
                     VerticalOptions="Start"
                     Margin="80,0,0,0"                  
                     Clicked="OnAvatarClicked" />

        <ImageButton x:Name="MenuImageButton"
                     Source="menu.png"
                     WidthRequest="40"
                     HeightRequest="40"
                     CornerRadius="5"
                     HorizontalOptions="Start"
                     VerticalOptions="Start"
                     Margin="20,0,0,0"
                     ToolTipProperties.Text="ÐœÐµÐ½ÑŽ"
                     Clicked="OnMenuClicked" />
        
        <ImageButton x:Name="RefreshImageButton"
                     Source="refresh.png"
                     WidthRequest="40"
                     HeightRequest="40"
                     CornerRadius="5"
                     HorizontalOptions="Start"
                     VerticalOptions="Start"
                     Margin="20,60,0,0"
                     ToolTipProperties.Text="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ"
                     Clicked="OnRefreshClicked" />

        <ImageButton x:Name="SortImageButton"
                     Source="sort.png"
                     WidthRequest="40"
                     HeightRequest="40"
                     CornerRadius="5"
                     HorizontalOptions="Start"
                     VerticalOptions="Start"
                     Margin="20,120,0,0"
                     ToolTipProperties.Text="Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ°"
                     Clicked="OnSortClicked" />

        <!-- Ð’Ñ‹Ð´Ð²Ð¸Ð³Ð°ÑŽÑ‰ÐµÐµÑÑ Ð¼ÐµÐ½ÑŽ -->
        <Grid x:Name="MenuOverlay"
              IsVisible="False"
              Opacity="0">
            <Grid.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnMenuOverlayTapped" />
            </Grid.GestureRecognizers>
        </Grid>

        <Frame x:Name="SideMenu"
               BackgroundColor="White"
               HasShadow="True"
               CornerRadius="0"
               Padding="20"
               WidthRequest="250"
               HorizontalOptions="Start"
               VerticalOptions="Start"
               TranslationX="-250"
               IsVisible="True">
            <StackLayout Spacing="15" VerticalOptions="Start">
                <Label Text="ÐœÐµÐ½ÑŽ"
                       FontSize="20"
                       FontAttributes="Bold"
                       Margin="0,20,0,10" />

                <StackLayout x:Name="MenuMenuItem"
                             Orientation="Horizontal" 
                             Spacing="15" 
                             Margin="0,10,0,0"
                             BackgroundColor="Transparent"
                             Padding="5">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnMenuMenuItemTapped" />
                    </StackLayout.GestureRecognizers>
                    <Image Source="menu.png"
                           WidthRequest="30"
                           HeightRequest="30" />
                    <Label Text="ÐœÐµÐ½ÑŽ"
                           FontSize="16"
                           VerticalOptions="Center" />
                </StackLayout>

                <StackLayout x:Name="RefreshMenuItem"
                             Orientation="Horizontal" 
                             Spacing="15" 
                             Margin="0,10,0,0"
                             BackgroundColor="Transparent"
                             Padding="5">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnRefreshMenuItemTapped" />
                    </StackLayout.GestureRecognizers>
                    <Image Source="refresh.png"
                           WidthRequest="30"
                           HeightRequest="30" />
                    <Label Text="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ"
                           FontSize="16"
                           VerticalOptions="Center" />
                </StackLayout>

                <StackLayout x:Name="SortMenuItem"
                             Orientation="Horizontal" 
                             Spacing="15" 
                             Margin="0,10,0,0"
                             BackgroundColor="Transparent"
                             Padding="5">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnSortMenuItemTapped" />
                    </StackLayout.GestureRecognizers>
                    <Image Source="sort.png"
                           WidthRequest="30"
                           HeightRequest="30" />
                    <Label Text="Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ"
                           FontSize="16"
                           VerticalOptions="Center" />
                </StackLayout>

                <Label Text="Ð ÐµÐ¶Ð¸Ð¼ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ"
                       FontSize="16"
                       FontAttributes="Bold"
                       Margin="0,20,0,5" />
                <StackLayout x:Name="DisplayListMenuItem" Orientation="Horizontal" Spacing="15" Margin="0,5,0,0" BackgroundColor="Transparent" Padding="5">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnDisplayListTapped" />
                    </StackLayout.GestureRecognizers>
                    <Label Text="ðŸ“‹ Ð¡Ð¿Ð¸ÑÐ¾Ðº" FontSize="14" VerticalOptions="Center" />
                </StackLayout>
                <StackLayout x:Name="DisplayKanbanMenuItem" Orientation="Horizontal" Spacing="15" Margin="0,5,0,0" BackgroundColor="Transparent" Padding="5">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnDisplayKanbanTapped" />
                    </StackLayout.GestureRecognizers>
                    <Label Text="ðŸ“Š Kanban" FontSize="14" VerticalOptions="Center" />
                </StackLayout>
                <StackLayout x:Name="DisplayCalendarMenuItem" Orientation="Horizontal" Spacing="15" Margin="0,5,0,0" BackgroundColor="Transparent" Padding="5">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnDisplayCalendarTapped" />
                    </StackLayout.GestureRecognizers>
                    <Label Text="ðŸ“… ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ" FontSize="14" VerticalOptions="Center" />
                </StackLayout>
                <StackLayout x:Name="DisplayGanttMenuItem" Orientation="Horizontal" Spacing="15" Margin="0,5,0,0" BackgroundColor="Transparent" Padding="5">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnDisplayGanttTapped" />
                    </StackLayout.GestureRecognizers>
                    <Label Text="ðŸ“ˆ Ð“Ð°Ð½Ñ‚Ð°" FontSize="14" VerticalOptions="Center" />
                </StackLayout>
            </StackLayout>
        </Frame>

        <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº Ñ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ñ‚ÐµÐ¼Ñ‹ -->
        <Frame x:Name="SettingsPanel"
               BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource OffBlack}}"
               HasShadow="True"
               CornerRadius="10"
               Padding="15"
               WidthRequest="220"
               HorizontalOptions="End"
               VerticalOptions="Start"
               Margin="0,60,10,0"
               IsVisible="False">
            <StackLayout Spacing="10">
                <Label Text="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"
                       FontSize="18"
                       FontAttributes="Bold" />

                <StackLayout Orientation="Horizontal"
                             Spacing="10"
                             VerticalOptions="Center">
                    <Label Text="Ð¢Ñ‘Ð¼Ð½Ð°Ñ Ñ‚ÐµÐ¼Ð°"
                           VerticalOptions="Center" />
                    <Switch x:Name="ThemeSwitch"
                            HorizontalOptions="EndAndExpand"
                            Toggled="OnThemeSwitchToggled" />
                </StackLayout>
            </StackLayout>
        </Frame>

        <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹ Ð² Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ð¼ ÑÐ»Ð¾Ðµ (Ð½Ðµ Ð²Ð»Ð¸ÑÐµÑ‚ Ð½Ð° layout Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð°) -->
        <AbsoluteLayout x:Name="NotificationsOverlay"
                        Grid.RowSpan="2" 
                        ZIndex="1000" 
                        InputTransparent="True"
                        HorizontalOptions="Fill"
                        VerticalOptions="Fill">
            <AbsoluteLayout.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnNotificationsOverlayTapped" />
            </AbsoluteLayout.GestureRecognizers>
            <Frame x:Name="NotificationsPanel"
                   BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource OffBlack}}"
                   HasShadow="True"
                   CornerRadius="10"
                   Padding="15"
                   WidthRequest="350"
                   HeightRequest="500"
                   IsVisible="False"
                   Opacity="0"
                   InputTransparent="False"
                   AbsoluteLayout.LayoutBounds="0.95,60,350,500"
                   AbsoluteLayout.LayoutFlags="XProportional">
                <StackLayout Spacing="10">
                    <Label Text="Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ"
                           FontSize="18"
                           FontAttributes="Bold"
                           Margin="0,0,0,10" />

                    <ScrollView>
                        <StackLayout x:Name="NotificationsContainer" 
                                     Spacing="0" />
                    </ScrollView>
                </StackLayout>
            </Frame>
        </AbsoluteLayout>
    </Grid>
   
</ContentPage>
